angular.module("app",["ionic"]),function(){function t(t){function e(){r.submitted=!0}function o(e){e&&(t.$broadcast("newProjectSubmitted",e),c())}function n(){t.$broadcast("newProjectClosed",null),c()}function c(){r.project={title:""},r.submitted=!1}var r=this;r.project={title:""},r.submitForm=e,r.submitProject=o,r.closeNewProject=n}angular.module("app").controller("NewProjectController",t),t.$inject=["$rootScope"]}(),function(){function t(t){function e(){r.submitted=!0}function o(e){e&&(t.$broadcast("newTaskSubmitted",e),n())}function n(){r.task={title:""},r.submitted=!1}function c(){t.$broadcast("newTaskClosed",null),n()}var r=this;r.task={title:""},r.submitForm=e,r.submitTask=o,r.closeNewTask=c}angular.module("app").controller("NewTaskController",t),t.$inject=["$rootScope"]}(),function(){function t(t,e,o,n,c,r){function a(){P.projects=r.all(),P.activeProject=P.projects[r.getLastActiveIndex()],n.fromTemplateUrl("app/projects/new-project.html",function(t){P.projectModal=t},{focusFirstInput:!0}),n.fromTemplateUrl("app/projects/new-task.html",function(t){P.taskModal=t},{focusFirstInput:!0}),t.$on("newProjectSubmitted",function(t,e){P.createProject(e)}),t.$on("newProjectClosed",function(t,e){P.closeNewProject()}),t.$on("newTaskSubmitted",function(t,e){P.createTask(e)}),t.$on("newTaskClosed",function(t,e){P.closeNewTask()}),t.data={},e(function(){0==P.projects.length&&m()}),t.$on("$destroy",function(){t.projectModal.remove(),t.taskModal.remove()})}function i(){c.toggleLeft()}function l(t,e){P.activeProject=t,r.setLastActiveIndex(e),c.toggleLeft(!1)}function s(){P.projectModal.show()}function u(){P.taskModal.show()}function p(t){var e=r.newProject(t.title);P.projects.push(e),P.projectModal.hide(),r.save(P.projects),P.selectProject(e,P.projects.length-1)}function j(){P.projectModal.hide()}function d(t){P.activeProject&&t&&(P.activeProject.tasks.push({title:t.title}),P.taskModal.hide(),r.save(P.projects))}function f(){P.taskModal.hide()}function m(){o.show({template:'<input class="project-title" type="text" ng-model="data.title">',title:"Enter Your First Project",scope:t,buttons:[{text:"<b>Create Project</b>",type:"button-positive",onTap:function(e){return t.data.title?void P.createProject({title:t.data.title}):void e.preventDefault()}}]})}var P=this;P.task={title:""},P.toggleProjects=i,P.selectProject=l,P.newProject=s,P.newTask=u,P.createProject=p,P.closeNewProject=j,P.createTask=d,P.closeNewTask=f,a()}angular.module("app").controller("ProjectController",t),t.$inject=["$scope","$timeout","$ionicPopup","$ionicModal","$ionicSideMenuDelegate","projectService"]}(),function(){function t(t){return{all:function(){var e=t.localStorage.projects;return e?angular.fromJson(e):[]},save:function(e){t.localStorage.projects=angular.toJson(e)},newProject:function(t){return{title:t,tasks:[]}},getLastActiveIndex:function(){return parseInt(t.localStorage.lastActiveProject)||0},setLastActiveIndex:function(e){t.localStorage.lastActiveProject=e}}}angular.module("app").factory("projectService",t),t.$inject=["$window"]}();