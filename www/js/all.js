angular.module("app",["ionic"]);(function(){angular.module("app").controller("NewProjectController",["$rootScope",function(c){function d(){a.project={title:""};a.submitted=!1}var a=this;a.project={title:""};a.submitForm=function(){a.submitted=!0};a.submitProject=function(a){a&&(c.$broadcast("newProjectSubmitted",a),d())};a.closeNewProject=function(){c.$broadcast("newProjectClosed",null);d()}}])})();(function(){angular.module("app").controller("NewTaskController",["$rootScope",function(c){function d(){a.task={title:""};a.submitted=!1}var a=this;a.task={title:""};a.submitForm=function(){a.submitted=!0};a.submitTask=function(a){a&&(c.$broadcast("newTaskSubmitted",a),d())};a.closeNewTask=function(){c.$broadcast("newTaskClosed",null);d()}}])})();(function(){angular.module("app").controller("ProjectController",["$scope","$timeout","$ionicPopup","$ionicModal","$ionicSideMenuDelegate","projectService",function(c,d,a,f,g,e){function h(){a.show({template:'<input class="project-title" type="text" ng-model="data.title">',title:"Enter Your First Project",scope:c,buttons:[{text:"<b>Create Project</b>",type:"button-positive",onTap:function(a){c.data.title?b.createProject({title:c.data.title}):a.preventDefault()}}]})}var b=this;b.task={title:""};b.toggleProjects=
function(){g.toggleLeft()};b.selectProject=function(a,c){b.activeProject=a;e.setLastActiveIndex(c);g.toggleLeft(!1)};b.newProject=function(){b.projectModal.show()};b.newTask=function(){b.taskModal.show()};b.createProject=function(a){a=e.newProject(a.title);b.projects.push(a);b.projectModal.hide();e.save(b.projects);b.selectProject(a,b.projects.length-1)};b.closeNewProject=function(){b.projectModal.hide()};b.createTask=function(a){b.activeProject&&a&&(b.activeProject.tasks.push({title:a.title}),b.taskModal.hide(),
e.save(b.projects))};b.closeNewTask=function(){b.taskModal.hide()};(function(){b.projects=e.all();b.activeProject=b.projects[e.getLastActiveIndex()];f.fromTemplateUrl("app/projects/new-project.html",function(a){b.projectModal=a},{focusFirstInput:!0});f.fromTemplateUrl("app/projects/new-task.html",function(a){b.taskModal=a},{focusFirstInput:!0});c.$on("newProjectSubmitted",function(a,c){b.createProject(c)});c.$on("newProjectClosed",function(a,c){b.closeNewProject()});c.$on("newTaskSubmitted",function(a,
c){b.createTask(c)});c.$on("newTaskClosed",function(a,c){b.closeNewTask()});c.data={};d(function(){0==b.projects.length&&h()});c.$on("$destroy",function(){c.projectModal.remove();c.taskModal.remove()})})()}])})();(function(){angular.module("app").factory("projectService",["$window",function(c){return{all:function(){var d=c.localStorage.projects;return d?angular.fromJson(d):[]},save:function(d){c.localStorage.projects=angular.toJson(d)},newProject:function(c){return{title:c,tasks:[]}},getLastActiveIndex:function(){return parseInt(c.localStorage.lastActiveProject)||0},setLastActiveIndex:function(d){c.localStorage.lastActiveProject=d}}}])})();
